<!-- cases.html -->
<div class="cases-container">

  <h1>ğŸ“ Case Management</h1>

  <p *ngIf="loading()">Loading cases...</p>

  <table *ngIf="!loading() && cases().length > 0" class="cases-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Income</th>
        <th>Tax Amount</th>
        <th>Status</th>
        <th>Prediction</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let c of cases()">
        <td>{{ c.id }}</td>
        <td>{{ c.title }}</td>
        <td>{{ c.income | number }}</td>
        <td>{{ c.tax_amount | number }}</td>
        <td>
          <span
            class="status"
            [class.success]="c.status === 'success'"
            [class.review]="c.status === 'review'"
            [class.rejected]="c.status === 'rejected'"
          >
            {{ c.status }}
          </span>
        </td>
        <td>
          <span class="prediction" *ngIf="predictions[c.id]">
            {{ predictions[c.id] }}
          </span>
          <button class="predict-btn" *ngIf="!predictions[c.id]" (click)="predict(c)">
            Predict AI
          </button>
        </td>
      </tr>
    </tbody>
  </table>

  <p *ngIf="!loading() && cases().length === 0" class="empty">No cases found</p>

</div>
